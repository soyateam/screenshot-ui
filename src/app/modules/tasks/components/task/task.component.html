<div class="task-list">
    <mat-toolbar class="title">
        <span class="task-title">משימות מ: {{parentTask.name}}</span>
        <span>שיוך: {{parentTask.type}}</span>
        <span>כמות משימות: {{tasks.length}}</span>
    </mat-toolbar>

    <div class=card-list>
        <div  *ngFor="let item of tasks">
            <mat-card class="task" >
                <div routerLink="/task/{{item._id}}" class="text">
                    <mat-card-title>{{item.name}}</mat-card-title>
                    <mat-card-subtitle>{{item.description}}</mat-card-subtitle>
                    <div class="footer">
                        <div>
                            <mat-chip-list>
                                <mat-chip *ngFor="let group of item.groups"> {{group.name}}</mat-chip>
                            </mat-chip-list>
                        </div>
                        <div class="count">
                            <p >סה"כ משימות: {{item.subTasksCount}}</p>
                        </div>
                    </div>

                </div>
                <div>
                    <mat-card-actions>
                        <button class="menu" mat-icon-button [matMenuTriggerFor]="menu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item routerLink="/statistics/{{item._id}}">
                                <mat-icon>show_chart</mat-icon>
                                <span>סטטיסטיקות</span>
                            </button>
                            <button mat-menu-item (click)="deleteTask(item)">
                                <mat-icon>delete_forever</mat-icon>
                                <span>מחק משימה</span>
                            </button>
                            <button mat-menu-item (click)="openGroupDialog(item)">
                                <mat-icon>group_add</mat-icon>
                                <span>שיוך קבוצה</span>
                            </button>
                        </mat-menu>
                    </mat-card-actions>
                </div>
            </mat-card>
        </div>
    </div>
    <button mat-fab color="primary" class="add-button" (click)="openDialog()">
        <mat-icon>add</mat-icon>
    </button>
</div>